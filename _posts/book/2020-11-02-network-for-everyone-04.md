---
title: "모두의 네트워크 #4장: 데이터 링크 계층"
categories: network-for-everyone
tags: [ network-for-everyone ]
---

# 랜에서 데이터 전송하기

## 데이터 링크 계층의 역할과 이더넷

- 이더넷은 랜에서 데이터를 정상으로 주고받기 위한 규칙이다.
- 이더넷은 데이터 충돌을 막기 위한 규칙으로 CSMA/CD 방식을 사용한다.
- CSMA/CD에서 CS는 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지 확인하는 규칙, MA는 케이블에 데이터가 흐르고 있지 않으면 데이터를 보내도 된다는 규칙, CD는 충돌이 발생하고 있는지 확인하는 규칙이다.



## MAC의 주소와 구조

- MAC 주소는 48비트 숫자로 구성되어 있다. 그중 앞쪽 24비트는 랜 카드를 만든 제조사번호고 뒤쪽 24비트는 제조사가 랜 카드에 붙인 일련번호다.
- 이더넷 헤더는 목적지 MAC주소(6바이트), 출발지 MAC주소(6바이트), 유형(2바이트)으로 총 14바이트로 구성된다.
- 데이터 링크 계층에서 데이터 뒤에 추가하는 것을 트레일러라고 한다.



## 스위치의 구조

- 스위치는 데이터 링크 계층에서 동작하며 레이어 2 스위치 또는 스위칭 허브라고 부른다.
- 스위치에는 MAC 주소 테이블이 있다.
- MAC 주소 테이블은 스위치의 포트 번호와 그 포트에 연결되어 있는 컴퓨터의 MAC 주소가 등록되는 데이터베이스다.
- 스위치가 수신 포트 이외의 모든 포트에서 데이터를 송신하는 것을 플러딩이라고 한다.
- 스위치에서 MAC 주소를 기준으로 출발지를 선택하는 것을 MAC 주소 필터링이라고 한다. 



## 데이터가 케이블에서 충돌하지 않는 구조

- 전이중 통신방식이란 데이터의 송신과 수신을 동시에 수행하는 통신 방식이다.
- 반이중 통신방식은 회선 한 개로 송신과 수신을 번갈아가며 수행하는 통신 방식이다.
- 데이터 충돌이 발생하고 그 충돌 영향이 미치는 범위를 충돌 도메인이라고 한다. 

### ARP

- Address Resolution Protocol
- 목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜이다. 이더넷 프레임을 전송하려면 목적지 컴퓨터의 MAC 주소를 지정해야 한다. 
- 출발지 컴퓨터가 목적지 주소를 모르면 MAC 주소를 알아내기 위해 네트워크에 브로드 캐스트를 하는데, 이를 ARP 요청이라고 한다. 이것으로 출발지 컴퓨터는 MAC 주소를 얻고 이더넷 프레임을 만들 수 있다.
- 출발지 컴퓨터에서는 MAC 주소를 얻은 후에 MAC 주소와 IP 주소의 매핑 정보를 메모리에 보관한다. 이 정보를 *ARP 테이블*이라고 한다. 이후 데이터 통신은 자신의 컴퓨터에 보관된 ARP 테이블을 참고하여 전송한다.
- 하지만 IP 주소가 변경되면 MAC 주소도 함께 변경되므로 제대로 소통할 수 없다. 그래서 ARP 테이블에서는 보존 기간을 ARP 캐시로 지정하고 일정 시간이 지나면 삭제하고 다시 ARP 요청을 한다.



## 이더넷 종류와 특징

- 주요 이더넷 규격에는 10BASE5, 10BASE2, 10BASE-T, 100BASE-T가 있다.